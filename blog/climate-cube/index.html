<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=36b5d2e121" />
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" />

    <title>Climate Cube</title>

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="http://fransruben.io/blog/climate-cube/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="http://fransruben.io/blog/climate-cube/amp/" />
    
    <meta property="og:site_name" content="Personal Website" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Climate Cube" />
    <meta property="og:description" content="A small room on the first floor is where I spend my free time tinkering with design, code and electronics. Although the space is great, it is hard to get the climate right. This sparked the idea to measure the climate conditions in my study room to get some actual" />
    <meta property="og:url" content="http://fransruben.io/blog/climate-cube/" />
    <meta property="og:image" content="http://fransruben.io/content/images/2019/12/climate-cube-10-2.jpg" />
    <meta property="article:published_time" content="2019-12-29T19:19:01.000Z" />
    <meta property="article:modified_time" content="2020-01-02T19:52:26.000Z" />
    <meta property="article:tag" content="article" />
    
    <meta property="article:publisher" content="https://www.facebook.com/ghost" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Climate Cube" />
    <meta name="twitter:description" content="A small room on the first floor is where I spend my free time tinkering with design, code and electronics. Although the space is great, it is hard to get the climate right. This sparked the idea to measure the climate conditions in my study room to get some actual" />
    <meta name="twitter:url" content="http://fransruben.io/blog/climate-cube/" />
    <meta name="twitter:image" content="http://fransruben.io/content/images/2019/12/climate-cube-10-2.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Ruben van den Hout" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="article" />
    <meta name="twitter:site" content="@tryghost" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="800" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Personal Website",
        "logo": {
            "@type": "ImageObject",
            "url": "http://fransruben.io/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Ruben van den Hout",
        "url": "http://fransruben.io/author/ruben/",
        "sameAs": []
    },
    "headline": "Climate Cube",
    "url": "http://fransruben.io/blog/climate-cube/",
    "datePublished": "2019-12-29T19:19:01.000Z",
    "dateModified": "2020-01-02T19:52:26.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://fransruben.io/content/images/2019/12/climate-cube-10-2.jpg",
        "width": 1200,
        "height": 800
    },
    "keywords": "article",
    "description": "A small room on the first floor is where I spend my free time tinkering with\ndesign, code and electronics. Although the space is great, it is hard to get the\nclimate right. This sparked the idea to measure the climate conditions in my\nstudy room to get some actual data to compare with my feeling of dissatisfaction\nabout the temperature.\n\nIn my search for a solution I came across a nice Instructable for an IoT\nWeather\nStation\n[https://www.instructables.com/id/How-to-Make-Pocket-Sized-IoT-Weather-",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://fransruben.io/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.2" />
    <link rel="alternate" type="application/rss+xml" title="Personal Website" href="http://fransruben.io/rss/" />

</head>

<body class="post-template tag-article">
    <div class="gh-viewport">

        <header id="gh-head" class="gh-head">
            <nav class="gh-head-inner gh-container">

                <div class="gh-head-brand">
                    <h1>Ruben</h1>
                    <a class="gh-burger" role="button">
                        <div class="gh-burger-box">
                            <div class="gh-burger-inner"></div>
                        </div>
                    </a>
                </div>

                <div class="gh-head-menu">
                    <ul class="nav" role="menu">
    <li class="nav-work" role="menuitem"><a href="http://fransruben.io/">Work</a></li>
    <li class="nav-about" role="menuitem"><a href="http://fransruben.io/about/">About</a></li>
</ul>

                </div>

                <div class="gh-socials-container">
                    <div class="gh-socials">
                        <span class="fas fa-paper-plane"></span>
                        <a href="https://www.linkedin.com/in/rubenvandenhout" target="_blank" style="font-size:18px">
                            <span class="fab fa-linkedin-in"></span>
                        </a>
                         <a href="https://www.instagram.com/fransruben" target="_blank" style="font-size:18px">
                            <span class="fab fa-instagram"></span>
                        </a>
                    </div>
                </div>
            </nav>
        </header>

        <main class="gh-main">

            

<article class="gh-article post tag-article">

    <header class="gh-header gh-canvas">
        <span class="gh-post-meta"><time datetime="2019-12-29">29 Dec 2019</time> <span class="bull">&bull;</span> 4 min read</span>
        <h1 class="gh-title">Climate Cube</h1>

    </header>

    <div class="gh-content gh-canvas">
        <figure class="kg-card kg-image-card kg-width-wide"><img src="http://fransruben.io/content/images/2019/12/climate-cube-10-1.jpg" class="kg-image"></figure><p>A small room on the first floor is where I spend my free time tinkering with design, code and electronics. Although the space is great, it is hard to get the climate right. This sparked the idea to measure the climate conditions in my study room to get some actual data to compare with my feeling of dissatisfaction about the temperature.</p><!--kg-card-begin: markdown--><p>In my search for a solution I came across a nice <a href="https://www.instructables.com/id/How-to-Make-Pocket-Sized-IoT-Weather-Station/" target="_blank">Instructable for an IoT Weather Station</a>. It shows a compact setup with breakouts that come with ready made software libraries. Perfect to quickly get started.</p>
<!--kg-card-end: markdown--><h2 id="components">Components</h2><p>I have used the same electronic components as mentioned in the Instructable and added a Li-Po battery and charging module to make it portable. At first I wanted to use an Adruino Nano for the microprocessor, but the WiFi capabilities of the ESP8266 better suited my need for a stand-alone (untethered) solution. </p><figure class="kg-card kg-image-card"><img src="http://fransruben.io/content/images/2020/01/breakouts-lineup-3.png" class="kg-image"></figure><!--kg-card-begin: html--><table>
    <tr>
        <td><b>Bosch BME280</b><br>Temprature, Humidity, Pressure sensor</td>
    </tr>
    <tr>
        <td><b>OLED Display Module</b><br>
            SSD1306 128x64</td>
    </tr>
    <tr>
        <td><b>WeMos D1 Mini v2.0</b><br>ESP8266</td>
    </tr>
    <tr>
        <td><b>Li-Po battery</b><br>105 mAh</td>
    </tr>
    <tr>
        <td><b>Micro-USB Li battery charger</b><br>
            5V, 1A. 18650</td>
    </tr>
</table><!--kg-card-end: html--><h2 id="testing-the-circuit">Testing the circuit</h2><p>Both the BME280 and the OLED display breakout communicate with the WeMos D1 mini over I2C. The BME280 worked at first try with the example Arduino sketch and I was impressed by the sensitivity of the altitude measurement that detects differences sometimes smaller than 1 meter.</p><p>To get the display working I had to change the I2C address to 0x3C instead of the default 0x3D. It took some time to troubleshoot why the display was not working, but the addressing problem itself was quickly solved with an I2C scanner.</p><figure class="kg-card kg-gallery-card kg-width-wide"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="http://fransruben.io/content/images/2019/12/climate-cube-2.jpg" width="1200" height="800"></div><div class="kg-gallery-image"><img src="http://fransruben.io/content/images/2019/12/climate-cube-1.jpg" width="1132" height="1000"></div></div></div></figure><p>Connecting two breakouts on on the SCL and SDA pins worked perfectly. Before using the OLED display, I tried a larger TFT color display via SPI, but could not get it working. A stange behaviour of the Wemos D1 I then discovered was that connecting the CS (Chip Select) pin sets it in <strong>firmware flashing mode</strong> which breaks the serial connection. You can solve this by using another pin, but eventually the OLED display over I2C seemed the best solution. </p><h2 id="connecting-the-pieces">Connecting the pieces</h2><p>Now the components are working as together as they should, it was time to solder them together in a nice little package. I connected the display and the sensor at two different sides of the Wemos D1 mini to make it easier to solder two wires on the same PTH pin. Although later it would seem that this makes it a tiny bit harder to mount it firmly in a supporting frame.</p><figure class="kg-card kg-image-card kg-width-wide"><img src="http://fransruben.io/content/images/2019/12/climate-cube-3-1.jpg" class="kg-image"></figure><figure class="kg-card kg-image-card kg-width-wide"><img src="http://fransruben.io/content/images/2019/12/climate-cube-4-1.jpg" class="kg-image"></figure><h2 id="frame-the-solution">Frame the solution</h2><p>The instructable uses an unconventional frame made of brass plated iron rods that are soldered together in a cube. The rods also function as current conductors to enable the circuitry. I decided to go for a slightly more stable and robust frame by making it from perspex plates and M5 threaded studs. The battery and charging module are mounted together on the bottom plate, while the Wemos sits on the plate above. </p><figure class="kg-card kg-gallery-card kg-width-wide"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="http://fransruben.io/content/images/2019/12/climate-cube-6-1.jpg" width="1200" height="800"></div><div class="kg-gallery-image"><img src="http://fransruben.io/content/images/2019/12/climate-cube-7-1.jpg" width="1200" height="800"></div></div></div></figure><p>A nice happy accident was that I found a bracket with threaded ends that precisely fit this idea. The plate that came with the bracket was the perfect surface to mount the board on and the arc protects the fragile orthogonal connection between the display and the Wemos D1 mini. </p><figure class="kg-card kg-image-card kg-width-wide"><img src="http://fransruben.io/content/images/2019/12/climate-cube-9-1.jpg" class="kg-image"></figure><h2 id="result">Result</h2><!--kg-card-begin: markdown--><p>I am quite happy with the result and the aesthetics of it. In the first few days of using it I already came across some improvement points:</p>
<ul>
<li>The battery's capacity of 105mAh makes it lasts only 30 minutes because the display draws considerable current. Improving the battery capacity or implementing a sleep mode would help to keep it portable for longer.</li>
<li>Data can now only be gathered over serial communication. An improvement would be to have continuous data collection over WiFi, but in combination with the display it will be a challenge to keep it stand-alone.</li>
</ul>
<!--kg-card-end: markdown--><p>Let's see in the coming days whether the climate is indeed as moody as my mind thinks it is.</p><figure class="kg-card kg-image-card kg-width-wide"><img src="http://fransruben.io/content/images/2020/01/climate-cube-11.jpg" class="kg-image"></figure>

        <div id="container" style="width:100%; height:400px;"></div>

    </div>

    <footer class="gh-footer gh-canvas">



    </footer>

</article>

<aside class="gh-readmore">
    <div class="gh-readmore-inner gh-container">
        <div class="gh-readmore-next">
            
        </div>
        <div class="gh-readmore-prev">
            <a href="/asn-redesign/">
                <h4>ASN Banking App Redesign</h4> <svg viewBox="0 0 18 27" xmlns="http://www.w3.org/2000/svg"><path d="M2.397 25.426l13.143-11.5-13.143-11.5" stroke-width="3" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/></svg>

            </a>
        </div>
    </div>
</aside>


<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="/assets/built/highchart-implement.js?v=36b5d2e121"></script>

        </main>

    </div>


    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


    <script>
        $(document).ready(function () {
            // Mobile Menu Trigger
            $('.gh-burger').click(function () {
                $('body').toggleClass('gh-head-open');
            });
        });
    </script>

    <script src="/assets/built/jquery.fitvids.js?v=36b5d2e121"></script>
    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        });
        $(document).ready(function () {
            var $postContent = $(".gh-content");
            $postContent.fitVids();
        });
    </script>

    

    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="/assets/js/masonry.js?v=36b5d2e121"></script>

</body>

</html>